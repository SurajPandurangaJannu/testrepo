version: '1.0'
namespace: sap.ariba.ariba_sourcing
description: SAP ARIBA SOURCING
schemaVersion: 0.0.1
authType: ias
provisioningConfigs:
  - type: SetUpAssistant
    config:
      system_metadata:
        fields:
          - name: name
            source: uc
            required: true
          - name: type
            source: lob
            required: false
  - type: SetUpConnectivity
    config:
      inbound_communication:
        destinations:
          - name: ARIBA_SOURCING_API
            properties:
              - key: URL
                value: $.assignedTenant.configuration.credentials.outboundCommunication.oauth2mtls.url
              - key: app_tid
                value: <local_tenant_id>
              - key: api_permission_group
                value: $.assignedTenant.configuration.credentials.outboundCommunication.oauth2mtls.correlationIds[0]
              - key: tokenServiceURL
                value: $.assignedTenant.configuration.credentials.outboundCommunication.oauth2mtls.tokenServiceUrl
            additionalProperties:
              - key: URL.query.realmid
                value: $.assignedTenant.configuration.additionalProperties.aribaProperties[?(@.name == 'URL.queries.realmid')].value
              - key: URL.header.apikey
                value: $.assignedTenant.configuration.additionalProperties.aribaProperties[?(@.name == 'URL.queries.apikey')].value
